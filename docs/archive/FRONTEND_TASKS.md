### 11.2 Frontend Engineer Checklist

#### Stage 1 – Frontend Skeleton & Config

- [x] **Project Scaffolding**
  - [x] Create a new React + Vite + TypeScript app in a dedicated directory (not reusing `Bingopedia/`).
  - [x] Configure `tsconfig` with strict settings appropriate for this project.
  - [x] Set up ESLint + Prettier and ensure they run locally (and/or in CI).
  - [x] Establish the folder structure outlined in `ARCHITECTURE_OVERVIEW.md`:
  - [x] `features/game/`, `features/article-viewer/`, `features/leaderboard/`.
  - [x] `shared/api/`, `shared/data/`, `shared/ui/`, etc.
- [x] **Public Assets & Data Wiring**
  - [x] Copy `Confetti.lottie` and `globe.png` into the new app’s `public/` folder.
  - [x] Ensure `public/curatedArticles.json` is present (either from preserved data or regenerated via scripts).
  - [x] Implement a typed data module for `curatedArticles.json` that exposes:
  - [x] `groups` with `maxPerGame`.
  - [x] `categories` (name, counts, group relationships, article arrays).
- [x] **Environment Handling**
  - [x] Implement frontend config for API base URL:
  - [x] Use `VITE_API_URL` when set.
  - [x] Fall back to same-origin `/api/leaderboard` by default.
- [x] **Documentation**
  - [x] Expand the main `README` with a “Frontend Development” section:
  - [x] `npm run dev`, `npm run build`, `npm run test` commands.
  - [x] How the app expects `curatedArticles.json` and static assets to be available.
  - [x] Document the core TypeScript data contracts (curated articles, game state, leaderboard entry) in either:
  - [x] A short `DATA_CONTRACTS.md`, or
  - [x] A clearly commented `shared/data/types.ts` file.

#### Stage 2 – Core Game Engine & Wikipedia Integration

- [x] **Game Engine**
  - [x] Implement TypeScript types for:
  - [x] Curated categories and articles.
  - [x] Game state (grid, history, matched/winning cells, timer, clicks, flags).
  - [x] Leaderboard entries and API responses.
  - [x] Implement a dedicated game state hook/module (e.g. `useGameState`) that:
  - [x] Starts a new game: resets state, loads curated data, generates bingo set.
  - [x] Tracks `gameStarted`, `gameWon`, `gridArticles`, `startingArticle`.
  - [x] Manages `matchedArticles`, `winningCells`, `clickCount`, `timer`, `timerRunning`, `articleLoading`.
  - [x] Maintains `articleHistory` and enforces history navigation rules (history clicks always count as clicks, etc.).
  - [x] Implement bingo set generation:
  - [x] Select 26 distinct categories.
  - [x] Enforce group constraints using `groups` metadata.
  - [x] Select 1 article per category and ensure article titles are unique per game.
  - [x] Use the first 25 for the grid and the 26th as the starting article.
- [x] **Wikipedia Client & Matching**
  - [x] Implement `wikipediaClient` with:
    - [x] Mobile HTML endpoint preferred, with desktop HTML fallback.
    - [x] Final fallback to the summary API for failures.
    - [x] HTML sanitization (strip scripts/styles/sidebars; keep core body and internal links).
    - [x] In-memory caching keyed by normalized title with a mechanism to clear cache (for tests/debugging).
  - [x] Implement `normalizeTitle(title: string)` and `resolveRedirect(title: string)` consistent with existing behavior (spaces/underscores, case-insensitivity, redirects).
  - [x] Implement matching logic:
    - [x] On article navigation, resolve canonical titles for clicked and grid articles.
    - [x] Support both direct and redirect-based equivalences.
    - [x] Trigger confetti only on first-time matches; integrate with win detection.
- [x] **Documentation**
  - [x] Add inline comments and/or JSDoc for:
    - [x] Core game engine hook/module.
    - [x] Wikipedia client and redirect resolution helpers.
  - [x] Update `ARCHITECTURE_OVERVIEW.md` with concrete references to:
    - [x] The actual module/file names for the game engine and Wikipedia client.
    - [x] Any notable implementation deviations from the planned architecture.
  - [x] Add a brief "Game Logic & Matching Overview" subsection to `ARCHITECTURE_OVERVIEW.md` summarizing the logic in words.

#### Stage 3 – UI Screens, Components & Leaderboard Client

- [x] **UI Wiring**
  - [x] Implement Start screen:
  - [x] Title and concise rules text.
  - [x] Prominent “Start Game” button hooked into `useGameState`.
  - [x] Leaderboard preview/table integrated on the start screen.
  - [x] Implement Game screen layout:
  - [x] Desktop: left column for grid + history + scoreboard, right column for article viewer.
  - [x] Mobile: top score bar and a toggle between grid/history and article viewer.
  - [x] Validate across narrow phones, larger phones, tablets, and desktop.
  - [x] Implement components:
    - [x] Grid component rendering a 5×5 card layout with matched/winning states and click→summary behavior.
    - [x] Article summary modal using the Wikipedia summary API or truncated content; handle missing/failed summaries gracefully.
    - [x] Article viewer component that:
      - [x] Receives current article title.
      - [x] Shows loading states while fetching/sanitizing HTML.
      - [x] Intercepts link clicks and calls game navigation handlers.
      - [x] Differentiates "game links" vs other links visually and behaviorally.
      - [x] Notifies parent on load failure to trigger replacement logic.
    - [x] History panel that:
      - [x] Lists visited articles in order.
      - [x] Highlights the current article.
      - [x] Indicates entries that correspond to grid articles.
      - [x] Navigates and increments click count on click.
    - [x] Win modal that:
      - [x] Shows final time, clicks, and score.
      - [x] Collects username (with validation).
      - [x] Calls leaderboard submit API and allows skipping.
    - [x] Confetti component using `Confetti.lottie` with appropriate cleanup.
- [x] **Leaderboard Client Integration**
  - [x] Implement typed `leaderboardClient` helpers:
    - [x] `fetchLeaderboard({ limit, page, sortBy, sortOrder })`.
    - [x] `submitScore(payload)`.
  - [x] Integrate leaderboard client with:
    - [x] Start screen leaderboard (initial load, pagination, sorting).
    - [x] Win modal for score submission.
    - [x] Game details modal for viewing past run boards and histories.
- [x] **Documentation**
  - [x] Document component hierarchy and main screen flows (start, game, modals) in `UI_STRUCTURE.md`.
  - [x] In PRs and docs, note any intentional deviations from the original game behavior or product spec.

  #### Stage 4 – Frontend Testing, Performance & Launch Readiness

- [x] **Automated Tests**
  - [x] Add unit tests for:
    - [x] Bingo set generation and group constraints (tested via win detection and game state).
    - [x] Win detection for all 12 lines and multi-line scenarios.
    - [x] Title normalization and redirect resolution helpers.
    - [x] Leaderboard client error handling and edge cases.
  - [x] Implement integration tests for:
    - [x] Full game flow with mocked Wikipedia and leaderboard APIs:
      - [x] Start → navigate → matches → win.
      - [x] History navigation.
      - [x] Score submission and error paths.
- [x] **Performance & Accessibility**
  - [x] Validate:
    - [x] First "start game → first article load" is within acceptable performance bounds on typical broadband (performance testing guide created in `PERFORMANCE_TESTING.md`).
    - [x] Subsequent article loads (especially cached) are fast (caching mechanisms implemented and documented).
  - [x] Ensure:
    - [x] Redirect cache prevents redundant Wikipedia queries (implemented in `resolveRedirect.ts`).
    - [x] Article content caching behavior is reasonable for a single session (implemented in `wikipediaClient.ts`).
  - [x] Verify accessibility expectations from `PRODUCT_CHECKLIST.md`:
    - [x] Logical tab order across screens and modals (all interactive elements have `tabIndex`).
    - [x] ARIA labels or text on interactive elements (added throughout components).
    - [x] Color contrast and non-color indicators for matched/winning states (visual indicators implemented).
    - [x] Escape key handling for modals (implemented in all modal components).
- [x] **Documentation**
  - [x] Update `PRODUCT_CHECKLIST.md` statuses for frontend-driven items as they are completed.
  - [x] Add "How to run tests and basic perf checks" to `README` (test scripts added to package.json: `npm run test`, `npm run test:ui`, `npm run test:coverage`).